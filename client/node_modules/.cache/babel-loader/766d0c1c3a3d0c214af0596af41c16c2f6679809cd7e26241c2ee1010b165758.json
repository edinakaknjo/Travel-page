{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\webtravel256\\\\client\\\\src\\\\pages\\\\Home.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport './css/travel.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  useEffect(() => {\n    allTravels();\n  }, []);\n  const navigate = useNavigate();\n  const [travels, settravels] = useState([]);\n  const token = localStorage.getItem('token');\n  const uloga = localStorage.getItem('uloga');\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('uloga');\n    navigate('/login');\n  };\n  const allTravels = async () => {\n    try {\n      const response = await axios.get('http://localhost:3001/api/travels');\n      settravels(response.data);\n    } catch (error) {\n      console.error('Error fetching', error);\n    }\n  };\n  const deleteTravel = async travelId => {\n    try {\n      const token = await localStorage.getItem('token');\n      await axios.delete(`http://localhost:3001/api/travels/${travelId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      allTravels();\n    } catch (error) {\n      console.error('Error deleting travel', error);\n    }\n  };\n  const odaberiTravel = async travelId => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.post(`http://localhost:3001/api/travels/odaberi/${travelId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      alert('selected');\n    } catch (error) {\n      console.error('Error joining travel', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Dostupna putovanja:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"komande\",\n      onClick: handleLogout,\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this), uloga === 'admin' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"komande\",\n        onClick: () => navigate('/users'),\n        children: \"Users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"komande\",\n        onClick: () => navigate('/travels'),\n        children: \"Travels\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"travel-container\",\n      children: travels.map(travel => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"travel-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: travel.slika,\n          alt: travel.naziv\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: travel.naziv\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: travel.opis\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Polazak: \", new Date(travel.polazak).toLocaleDateString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Povratak: \", new Date(travel.povratak).toLocaleDateString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), uloga === 'admin' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"dugme-delete\",\n            onClick: () => deleteTravel(travel._id),\n            children: \"Obrisi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 46\n          }, this)]\n        }, void 0, true), uloga === 'user' && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"dugme-join\",\n          onClick: () => odaberiTravel(travel._id),\n          children: \"Odaberi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 42\n        }, this)]\n      }, travel._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n_s(Home, \"c0NVBaPp+DpvLZ3MeyCdRc+uw+I=\", false, function () {\n  return [useNavigate];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","Home","_s","allTravels","navigate","travels","settravels","token","localStorage","getItem","uloga","handleLogout","removeItem","response","get","data","error","console","deleteTravel","travelId","delete","headers","Authorization","odaberiTravel","post","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","map","travel","src","slika","alt","naziv","opis","Date","polazak","toLocaleDateString","povratak","_id","_c","$RefreshReg$"],"sources":["C:/Users/User/webtravel256/client/src/pages/Home.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './css/travel.css';\r\n\r\nconst Home = () => {\r\n\r\n\r\n    useEffect(() => {\r\n          allTravels();\r\n    }, []);\r\n   \r\n    const navigate = useNavigate();\r\n    const [travels, settravels] = useState([]);\r\n    const token = localStorage.getItem('token');\r\n    const uloga = localStorage.getItem('uloga');\r\n    \r\n    \r\n    const handleLogout = () => {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('uloga');\r\n        navigate('/login');\r\n    };\r\n\r\n    const allTravels = async () => {\r\n        try {\r\n          const response = await axios.get('http://localhost:3001/api/travels');\r\n          settravels(response.data);\r\n        } catch (error) {\r\n          console.error('Error fetching', error);\r\n        }\r\n      };\r\n    \r\n    const deleteTravel = async (travelId) => {\r\n        try {\r\n            const token = await localStorage.getItem('token');\r\n            await axios.delete(`http://localhost:3001/api/travels/${travelId}`, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            });\r\n            allTravels(); \r\n        } catch (error) {\r\n            console.error('Error deleting travel', error);\r\n        }\r\n    };\r\n\r\n    const odaberiTravel = async (travelId) => {\r\n        try {\r\n          const token = localStorage.getItem('token');\r\n          const response = await axios.post(\r\n            `http://localhost:3001/api/travels/odaberi/${travelId}`,\r\n            {\r\n              headers: {\r\n                Authorization: `Bearer ${token}`,\r\n              },\r\n            }\r\n          );\r\n          \r\n          alert('selected');\r\n        } catch (error) {\r\n          console.error('Error joining travel', error);\r\n        }\r\n      };\r\n      \r\n    \r\n    \r\n    return (\r\n        <div>\r\n        <h1>Dostupna putovanja:</h1>\r\n        <button className='komande' onClick={handleLogout}>Logout</button>\r\n        {uloga === 'admin' && (\r\n            <>\r\n            <button className='komande' onClick={() => navigate('/users')}>Users</button>\r\n            <button className='komande' onClick={() => navigate('/travels')}>Travels</button>\r\n            </>\r\n        )}\r\n            <div className=\"travel-container\">\r\n            {travels.map(travel => (\r\n                <div className=\"travel-card\" key={travel._id}>\r\n                    <img src={travel.slika} alt={travel.naziv} />\r\n                    <div>\r\n                    <h2>{travel.naziv}</h2>\r\n                    <p>{travel.opis}</p>\r\n                    <p>Polazak: {new Date(travel.polazak).toLocaleDateString()}</p>\r\n                    <p>Povratak: {new Date(travel.povratak).toLocaleDateString()}</p>\r\n                    </div>\r\n                    {uloga === 'admin' && <> <button className='dugme-delete' onClick={() => deleteTravel(travel._id)}>Obrisi</button></>}\r\n                    {uloga === 'user' && <button className='dugme-join' onClick={() => odaberiTravel(travel._id)}>Odaberi</button>}\r\n                    \r\n                    \r\n                </div>\r\n            ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}